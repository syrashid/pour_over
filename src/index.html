<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title> ❤️ Pour Over ❤️ </title>
</head>
<body>
  <div class="container mx-auto justify-center flex items-center">
    <div class="step ">
      <div class="step__text-container flex justify-center mb-12">
        <h1 class="text-7xl text-center step__text">
          This is a sample text for a step
        </h1>
      </div>
      <div class="step__timer-container flex justify-center mb-12">
        <h3 class="text-4xl text-center step__timer">
          This is a sample space for a timer
        </h3>
      </div>
      <div class="step__animation-container flex flex-col items-center mb-12">
        <div class="step__animation">
          <form action="https://www.yelp.com/search" method="get" target="_blank">
            I'm looking for a

            <span id="atmosphere" class="input-container">
              <span class="placeholder">fancy</span>
              <span class="input selectbox">
                <select class="fancy-select hidden" name="find_desc">
                  <option value="fancy">fancy</option>
                  <option value="hip">hip</option>
                  <option value="romantic">romantic</option>
                  <option value="casual">casual</option>
                </select>
              </span>
            </span>
            <span id="cuisine" class="input-container">
              <span class="placeholder">chinese</span>
              <span class="input selectbox">
                <select name="cflt" class="fancy-select hidden">
                  <option value="chinese">chinese</option>
                  <option value="italian">italian</option>
                  <option value="french">french</option>
                  <option value="german">german</option>
                </select>
              </span>
            </span>
            restaurant in
            <span id="location" class="input-container no-overflow">
              <span class="input text">
                <input type="text" id="location-input" name="find_loc" value="New York"/>
              </span>
              <span class="placeholder">New York</span>.
            </span>
            <button type="submit">Find a Restaurant</button>
          </form>

        </div>
        <div class="flex">
          <button class="step__btn--prev bg-blue-300 hover:bg-blue-400 text-white font-bold py-2 px-4 rounded-l">
            Prev
          </button>
          <button class="step__btn--next bg-blue-300 hover:bg-blue-400 text-white font-bold py-2 px-4 rounded-r">
            Next
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Implement Turn.JS Flipbook for the frame for the animation -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    // show and hide styled inputs, update natural language statement
    $(".input-container").click(function () {
      var target = $(this);
      var targetInput = $(this).find("input");
      var targetSelect = $(this).find("select");
      var styledSelect = $(this).find(".newSelect");
      target.addClass("active");
      targetInput.focus();
      targetInput.change(function () {
        var inputValue = $(this).val();
        var placeholder = target.find(".placeholder");
        target.removeClass("active");
        placeholder.html(inputValue);
      });
      targetSelect.change(function () {
        var inputValue = $(this).val();
        var placeholder = target.find(".placeholder");
        target.removeClass("active");
        placeholder.html(inputValue);
      });
      styledSelect.click(function () {
        var target = $(this);
        setTimeout(function () {
          target.parent().parent().removeClass("active");
        }, 10);
      });
    });

    // style selects

    // Create the new select
    var select = $(".fancy-select");
    select.wrap('<div class="newSelect"></div>');
    $(".newSelect").prepend('<div class="newOptions"></div>');

    //populate the new select
    select.each(function () {
      var selectOption = $(this).find("option");
      var target = $(this).parent().find(".newOptions");
      selectOption.each(function () {
        var optionContents = $(this).html();
        var optionValue = $(this).attr("value");
        target.append(
        '<div class="newOption" data-value="' +
        optionValue +
        '">' +
        optionContents +
        "</div>"
        );
      });
    });
    // new select functionality
    var newSelect = $(".newSelect");
    var newOption = $(".newOption");
    // update based on selection
    newOption.on("mouseup", function () {
      var OptionInUse = $(this);
      var siblingOptions = $(this).parent().find(".newOption");
      var newValue = $(this).attr("data-value");
      var selectOption = $(this).parent().parent().find("select option");
      // style selected option
      siblingOptions.removeClass("selected");
      OptionInUse.addClass("selected");
      // update the actual input
      selectOption.each(function () {
        var optionValue = $(this).attr("value");
        if (newValue == optionValue) {
          $(this).prop("selected", true);
        } else {
          $(this).prop("selected", false);
        }
      });
    });
    newSelect.click(function () {
      var target = $(this);
      target.parent().find("select").change();
    });
  </script>

</body>
</html>
